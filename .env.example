# OpenHamClock Configuration
#
# This file is automatically copied to .env on first run.
# Edit .env with your station info — it won't be overwritten by updates.
#
# After editing, restart the server: npm start
#
# -------------------------------------------
# DEV PORTS (important)
# -------------------------------------------
# In this repo's default dev setup:
#   - Frontend (Vite dev server): http://localhost:3000
#   - Backend API (Node/Express): http://localhost:3001
#
# The Vite dev server proxies /api to the backend on :3001.
# If you run the backend on :3000, it will conflict with Vite.
# -------------------------------------------

# ===========================================
# REQUIRED — Your Station Information
# ===========================================

# Your amateur radio callsign
CALLSIGN=N0CALL

# Your Maidenhead grid locator (4 or 6 character)
LOCATOR=FN31

# Optional station coordinates (calculated from LOCATOR if not set)
# LATITUDE=40.7128
# LONGITUDE=-74.0060

# ===========================================
# SERVER SETTINGS (Backend API)
# ===========================================

# Backend API server port
# Dev default: 3001 (see DEV PORTS note above)
PORT=3001

# Host/IP to bind to
# localhost = only accessible from this computer
# 0.0.0.0 = accessible from other devices on your network
HOST=localhost

# ===========================================
# SECURITY
# ===========================================

# API key for write operations (POST /api/update, /api/settings, /api/n3fjp/qso, etc.)
# If not set, write endpoints are open (fine for local/home network installs).
# REQUIRED for cloud/public deployments to prevent unauthorized access.
# API_WRITE_KEY=your-secret-key-here

# CORS allowed origins (comma-separated)
# If not set, defaults to reflecting the request origin (backward-compatible).
# Set this for cloud deployments to restrict which websites can call your API.
# CORS_ORIGINS=https://yourdomain.com,http://localhost:3000

# ===========================================
# AUTO UPDATE (GIT)
# ===========================================

# Enable automatic updates (requires git installation and repo clone)
AUTO_UPDATE_ENABLED=false

# Check interval in minutes
AUTO_UPDATE_INTERVAL_MINUTES=60

# Run a check shortly after startup (true/false)
AUTO_UPDATE_ON_START=false

# Exit after update so a supervisor (systemd/pm2) can restart (true/false)
AUTO_UPDATE_EXIT_AFTER=true

# ===========================================
# SETTINGS SYNC (Self-Hosted / Pi)
# ===========================================

# When enabled, all UI settings (layout, panels, map layers, filters, theme, etc.)
# are saved on the server. Any device that connects to your OHC instance will
# automatically load your saved configuration — no need to set up each browser.
#
# Disabled by default. Enable for single-operator self-hosted/Pi deployments.
# Do NOT enable on multi-user hosted deployments (e.g. openhamclock.com).
SETTINGS_SYNC=false

# Optional: custom path for settings file (default: ./data/settings.json)
# SETTINGS_FILE=/path/to/settings.json

# ===========================================
# DISPLAY PREFERENCES
# ===========================================

# Units: 'imperial' or 'metric'
UNITS=imperial

# Time format: '12' or '24' hour
TIME_FORMAT=12

# Theme: 'dark', 'light', 'legacy', or 'retro'
THEME=dark

# Layout: 'modern' or 'classic'
LAYOUT=modern

# Timezone: IANA timezone identifier
# Set this if your local time shows incorrectly (e.g. same as UTC).
# Common with privacy browsers that spoof timezone.
# Examples: America/New_York, America/Regina, Europe/London, Asia/Tokyo
# Leave blank/commented to use browser default.
# TZ=America/New_York

# ===========================================
# OPTIONAL — External Services
# ===========================================

# ITURHFProp service URL (for advanced propagation predictions)
# Override only if self-hosting your own ITURHFProp service.
# ITURHFPROP_URL=https://proppy-production.up.railway.app

# DX Spider Proxy URL (for DX cluster spots)
# DXSPIDER_PROXY_URL=https://your-dxspider-proxy.com

# DX Cluster source: auto | proxy | hamqth | dxspider
# auto = tries proxy first, then HamQTH, then direct telnet
# proxy = use DX Spider Proxy (set DXSPIDER_PROXY_URL above)
# hamqth = HamQTH CSV feed (HTTP, works everywhere)
# dxspider = direct telnet to DX Spider nodes (works locally/Pi)
# DX_CLUSTER_SOURCE=auto

# OpenWeatherMap API key (optional — only needed for the Cloud Layer map overlay)
# Weather data uses Open-Meteo directly from each user's browser — no key needed.
# OPENWEATHER_API_KEY=your_api_key_here
# VITE_OPENWEATHER_API_KEY=your_api_key_here

# QRZ.com XML API credentials (optional — improves callsign location accuracy)
# QRZ_USERNAME=your_callsign
# QRZ_PASSWORD=your_qrz_password

# ===========================================
# FEATURE TOGGLES
# ===========================================

SHOW_POTA=true
SHOW_SATELLITES=true
SHOW_DX_PATHS=true
SHOW_DX_WEATHER=true

# Show analog clock in classic layout (true/false)
# The analog clock is always available in the dockable layout
CLASSIC_ANALOG_CLOCK=false

# ===========================================
# WSJT-X / JTDX UDP INTEGRATION
# ===========================================

WSJTX_ENABLED=true
WSJTX_UDP_PORT=2237

# Relay key for remote WSJT-X relay agent (cloud deployments)
# WSJTX_RELAY_KEY=your-secret-relay-key-here

# ===========================================
# DX CLUSTER SETTINGS
# ===========================================

# DX_CLUSTER_CALLSIGN=N0CALL-56
SPOT_RETENTION_MINUTES=30

# ===========================================
# CONTEST LOGGER UDP (N1MM / DXLog)
# ===========================================

N1MM_UDP_ENABLED=false
N1MM_UDP_PORT=12060
N1MM_MAX_QSOS=200
N1MM_QSO_MAX_AGE_MINUTES=360

# ===========================================
# AMBIENT WEATHER (AmbientWeather.net)
# ===========================================

# These are read by the Vite client (must start with VITE_)
# Put real keys in .env.local (recommended) so you don't commit secrets.

VITE_AMBIENT_APPLICATION_KEY=your_application_key_here
VITE_AMBIENT_API_KEY=your_api_key_here

# Optional: MAC address of the station device to use (if you have multiple)
# VITE_AMBIENT_DEVICE_MAC=48:E7:29:69:96:10

# Optional: polling interval in seconds (minimum 15)
# VITE_AMBIENT_POLL_SECONDS=30

# ===========================================
# ROTATOR CONTROL
# ===========================================

ROTATOR_PROVIDER=pstrotator_udp
PSTROTATOR_HOST=192.168.1.43
PSTROTATOR_UDP_PORT=12000
ROTATOR_STALE_MS=5000

# Your app will use the proxy path:
VITE_PSTROTATOR_BASE_URL=/pstrotator

# Optional: HTTP endpoint for PstRotatorAz web interface (for proxy)
# Set this to the machine running PstRotatorAz (default shown below)
VITE_PSTROTATOR_TARGET=http://192.168.1.43:50004

# ===========================================
# N3FJP QSO RETENTION
# ===========================================

# How long the server keeps logged QSOs in memory (minutes)
# 1440 = 24 hours
N3FJP_QSO_RETENTION_MINUTES=1440
